plugins {
    id("groovy")
    id("java-library")
    id("com.github.johnrengelman.shadow") version "8.1.1"
    id 'codenarc'
}

version = "0.1"
group = "uk.ac.ox.softeng.mauro"

repositories {
    mavenCentral()
}
java {
    sourceCompatibility = JavaVersion.toVersion("17")
    targetCompatibility = JavaVersion.toVersion("17")
}



subprojects {
    apply plugin: "maven-publish"
    if (project.hasProperty('gpr.user') && project.hasProperty('gpr.key')) {

        publishing {
            repositories {
                maven {
                    name = "GitHubPackages"
                    url = uri("https://maven.pkg.github.com/MauroDataMapper/mauro-micronaut")
                    credentials {
                        username = project['gpr.user'] ?: System.getenv("USERNAME")
                        password = project['gpr.key'] ?: System.getenv("TOKEN")
                    }
                }
            }
        }
/*        publications {
            gpr(MavenPublication) {
                from(components.java)
            }

        }
*/
    }
}